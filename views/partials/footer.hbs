<div class="page__form" id="form">
    <div class="container">
        <div class="page-form">
            <div class="title">
                <div class="text text_s28 text_ttu">
                    СДЕЛАЙТЕ ЗАКАЗ
                </div>
            </div>
            <div class="text text_s13">
                Отправьте контакты и информацию о своем заказе. Мы свяжемся с Вами для подтверждения и уточнения деталей заказа.
            </div>
            <div class="page-form__form">
                <form class="form-order" id="feedback">
                    <div class="form-order__input-wrapper">
                        <input name="Name" type="text" class="form-order__input" placeholder="Ваше имя (обязательно)" required>
                    </div>
                    <div class="form-order__input-wrapper">
                        <input name="Email" type="text" class="form-order__input" placeholder="Ваш E-mail (обязательно)" required>
                    </div>
                    <div class="form-order__input-wrapper">
                        <input name="Phone" type="text" class="form-order__input" placeholder="Ваш телефон">
                    </div>
                    <div class="form-order__input-wrapper">
                        <input name="Input" type="text" class="form-order__input" placeholder="Ваша организация">
                    </div>
                    <div class="form-order__input-wrapper">
                        <textarea name="Textarea" id="" cols="1" rows="5" class="form-order__textarea" placeholder="Комментарий"></textarea>
                    </div>

                    {{#if home}}
                        <input type="hidden" name="Service" tabindex="-1" value="Отправлено с формы по Клинингу">
                    {{else}} 
                        <input type="hidden" name="Service" tabindex="-1" value="Отправлено с формы по Аренде">
                    {{/if}}

                    <div id="divLoad" class="form-order__loader" style="display:none;"></div>
                    <div id="divSuccess" class="form-order__success text_s18" style="display:none;">Сообщение успешно отправлено!</div>
                    <div id="divError" class="form-order__error text_s18" style="display:none;">Ошибка на сервере. Попробуйте позже.</div>
                
                    <div class="form-order__input-wrapper">
                        <input type="submit" class="form-order__submit" value="Сделать заказ">
                    </div>
                </form>
            </div>
            <div class="text-warning">
                <div class="text text_s13">
                    Нажимая на кнопку, Вы даете согласие на обработку персональных данных и соглашаетесь c политикой конфиденциальности
                </div>
            </div>
        </div>
    </div>
</div>
<div class="page__footer">
    <div class="container">
        <div class="footer">
            <div class="t-sociallinks" >
                <div class="t-sociallinks__wrapper">
                    <div class="t-sociallinks__item" style="display:inline-block;">
                        <a href="https://www.facebook.com/allcleaningservicellp" target="_blank">
                            <svg class="t-sociallinks__svg" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="30px" height="30px" viewBox="0 0 48 48" enable-background="new 0 0 48 48" xml:space="preserve"><desc>Facebook</desc><path style="fill:#000000;" d="M47.761,24c0,13.121-10.638,23.76-23.758,23.76C10.877,47.76,0.239,37.121,0.239,24c0-13.124,10.638-23.76,23.764-23.76C37.123,0.24,47.761,10.876,47.761,24 M20.033,38.85H26.2V24.01h4.163l0.539-5.242H26.2v-3.083c0-1.156,0.769-1.427,1.308-1.427h3.318V9.168L26.258,9.15c-5.072,0-6.225,3.796-6.225,6.224v3.394H17.1v5.242h2.933V38.85z"></path></svg>
                        </a>
                    </div>
                    <div class="t-sociallinks__item" style="display:inline-block;">
                        <a href="https://vk.com/allcleaningservice" target="_blank">
                            <svg class="t-sociallinks__svg" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="30px" height="30px" viewBox="0 0 48 48" enable-background="new 0 0 48 48" xml:space="preserve"><desc>VK</desc><path style="fill:#000000;" d="M47.761,24c0,13.121-10.639,23.76-23.76,23.76C10.878,47.76,0.239,37.121,0.239,24c0-13.123,10.639-23.76,23.762-23.76C37.122,0.24,47.761,10.877,47.761,24 M35.259,28.999c-2.621-2.433-2.271-2.041,0.89-6.25c1.923-2.562,2.696-4.126,2.45-4.796c-0.227-0.639-1.64-0.469-1.64-0.469l-4.71,0.029c0,0-0.351-0.048-0.609,0.106c-0.249,0.151-0.414,0.505-0.414,0.505s-0.742,1.982-1.734,3.669c-2.094,3.559-2.935,3.747-3.277,3.524c-0.796-0.516-0.597-2.068-0.597-3.171c0-3.449,0.522-4.887-1.02-5.259c-0.511-0.124-0.887-0.205-2.195-0.219c-1.678-0.016-3.101,0.007-3.904,0.398c-0.536,0.263-0.949,0.847-0.697,0.88c0.31,0.041,1.016,0.192,1.388,0.699c0.484,0.656,0.464,2.131,0.464,2.131s0.282,4.056-0.646,4.561c-0.632,0.347-1.503-0.36-3.37-3.588c-0.958-1.652-1.68-3.481-1.68-3.481s-0.14-0.344-0.392-0.527c-0.299-0.222-0.722-0.298-0.722-0.298l-4.469,0.018c0,0-0.674-0.003-0.919,0.289c-0.219,0.259-0.018,0.752-0.018,0.752s3.499,8.104,7.573,12.23c3.638,3.784,7.764,3.36,7.764,3.36h1.867c0,0,0.566,0.113,0.854-0.189c0.265-0.288,0.256-0.646,0.256-0.646s-0.034-2.512,1.129-2.883c1.15-0.36,2.624,2.429,4.188,3.497c1.182,0.812,2.079,0.633,2.079,0.633l4.181-0.056c0,0,2.186-0.136,1.149-1.858C38.281,32.451,37.763,31.321,35.259,28.999"></path></svg>
                        </a>
                    </div>
                    <div class="t-sociallinks__item" style="display:inline-block;">
                        <a href="https://ok.ru/group/56465815109865" target="_blank">
                            <svg class="t-sociallinks__svg" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="30px" height="30px" viewBox="0 0 30 30" xml:space="preserve"><desc>Odnoklassniki</desc><path style="fill:#000000;" d="M15.0010773,29.9969026 C6.71476662,29.9969026 -0.000942760943,23.2811932 -0.000942760943,14.9979126 C-0.000942760943,6.71261195 6.71476662,-0.00107736853 15.0010773,-0.00107736853 C23.2823378,-0.00107736853 29.9990572,6.71261195 29.9990572,14.9979126 C29.9990572,23.2811932 23.2833479,29.9969026 15.0010773,29.9969026 Z M14.9990572,9.16346042 C15.9845639,9.16346042 16.7857961,9.96559598 16.7857961,10.9501993 C16.7857961,11.9366092 15.9845639,12.7378415 14.9990572,12.7378415 C14.0126473,12.7378415 13.2114151,11.9366092 13.2114151,10.9501993 C13.2114151,9.96378937 14.0126473,9.16346042 14.9990572,9.16346042 L14.9990572,9.16346042 L14.9990572,9.16346042 Z M19.3159557,10.9501993 C19.3159557,8.56908521 17.3810746,6.63149426 14.9990572,6.63149426 C12.6170398,6.63149426 10.6803522,8.56908521 10.6803522,10.9501993 C10.6803522,13.3313134 12.6170398,15.2670977 14.9990572,15.2670977 C17.3810746,15.2670977 19.3159557,13.3313134 19.3159557,10.9501993 Z M16.7451474,18.7899904 C17.6249672,18.5876499 18.472268,18.242587 19.2527243,17.752092 C19.8443896,17.3790267 20.0232441,16.5976672 19.6510821,16.0069052 C19.2771135,15.4152399 18.4985739,15.2363853 17.9058953,15.6085473 C16.1354159,16.7214201 13.8590853,16.7214201 12.0904126,15.6085473 C11.4987473,15.2372886 10.7164844,15.4152399 10.3461291,16.0069052 C9.97306376,16.5967639 10.1519183,17.3790267 10.741777,17.752092 C11.5222332,18.2416837 12.3704374,18.5903598 13.2493539,18.7899904 L10.8348175,21.2036235 C10.3416125,21.6977317 10.3416125,22.5007706 10.8348175,22.9930722 C11.0805167,23.2387714 11.4048035,23.3634276 11.7290902,23.3634276 C12.053377,23.3634276 12.3776638,23.2387714 12.6242663,22.9930722 L14.995444,20.6209912 L17.3684284,22.9939756 C17.8625366,23.4871805 18.6637689,23.4871805 19.1560705,22.9939756 C19.6519854,22.4998673 19.6519854,21.6968284 19.1560705,21.2054301 L16.7451474,18.7899904 L16.7451474,18.7899904 L16.7451474,18.7899904 Z"></path></svg>
                        </a>
                    </div>
                    <div class="t-sociallinks__item" style="display:inline-block;">
                        <a href="https://instagram.com/all_cleaning_service" target="_blank">
                            <svg class="t-sociallinks__svg" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="30px" height="30px" viewBox="0 0 30 30" xml:space="preserve"><desc>Instagram</desc><path style="fill:#000000;" d="M15,11.014 C12.801,11.014 11.015,12.797 11.015,15 C11.015,17.202 12.802,18.987 15,18.987 C17.199,18.987 18.987,17.202 18.987,15 C18.987,12.797 17.199,11.014 15,11.014 L15,11.014 Z M15,17.606 C13.556,17.606 12.393,16.439 12.393,15 C12.393,13.561 13.556,12.394 15,12.394 C16.429,12.394 17.607,13.561 17.607,15 C17.607,16.439 16.444,17.606 15,17.606 L15,17.606 Z"></path><path style="fill:#000000;" d="M19.385,9.556 C18.872,9.556 18.465,9.964 18.465,10.477 C18.465,10.989 18.872,11.396 19.385,11.396 C19.898,11.396 20.306,10.989 20.306,10.477 C20.306,9.964 19.897,9.556 19.385,9.556 L19.385,9.556 Z"></path><path style="fill:#000000;" d="M15.002,0.15 C6.798,0.15 0.149,6.797 0.149,15 C0.149,23.201 6.798,29.85 15.002,29.85 C23.201,29.85 29.852,23.202 29.852,15 C29.852,6.797 23.201,0.15 15.002,0.15 L15.002,0.15 Z M22.666,18.265 C22.666,20.688 20.687,22.666 18.25,22.666 L11.75,22.666 C9.312,22.666 7.333,20.687 7.333,18.28 L7.333,11.734 C7.333,9.312 9.311,7.334 11.75,7.334 L18.25,7.334 C20.688,7.334 22.666,9.312 22.666,11.734 L22.666,18.265 L22.666,18.265 Z"></path></svg>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script>
    $(document).ready(function(){
        // Add smooth scrolling to all links
        $("a").on('click', function(event) {

            // Make sure this.hash has a value before overriding default behavior
            if (this.hash !== "") {
                // Prevent default anchor click behavior
                event.preventDefault();

                // Store hash
                var hash = this.hash;

                // Using jQuery's animate() method to add smooth page scroll
                // The optional number (800) specifies the number of milliseconds it takes to scroll to the specified area
                $('html, body').animate({
                    scrollTop: $(hash).offset().top
                }, 800, function(){
            
                    // Add hash (#) to URL when done scrolling (default click behavior)
                    window.location.hash = hash;
                });
            } // End if
        });

        var re = /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;

        $("#feedback").submit(function( event ) {
            
            
            $("#divError").css('display', 'none');
            $("#divSuccess").css('display', 'none');
            $("#divLoad").css('display', 'none');
            $("#divError").empty();
            $("#divSuccess").empty();

            var fEmail = $('[name="Email"]').val();

            if (!fEmail.match(re)) {
                $("#divError").css('display', 'block');
                $("#divError").text("Введите корректный E-mail адрес");
                console.log( "email error!" );
            } else {
                var formData = {
                        name: $('[name="Name"]').val(),
                        email: fEmail, 
                        phone: $('[name="Phone"]').val(), 
                        org: $('[name="Input"]').val(), 
                        comment: $('[name="Textarea"]').val(), 
                        service: $('[name="Service"]').val()
                    }
                console.log(formData);
                $("#divLoad").css('display', 'block');
                $.ajax({
                    type: "POST",
                    url: "/feedback",
                    contentType: 'application/json',
                    dataType: "json",
                    data: JSON.stringify(formData),
                    success:function(json){
                        $("#divLoad").css('display', 'none');
                        console.log(json.success + " " + json.reason);

                        if (json.success) {
                            $("#divSuccess").css('display', 'block');
                            $("#divSuccess").text("Сообщение успешно отправлено!");
                            $("#divError").empty();
                            $("#divError").css('display', 'none');
                        } else {
                            $("#divError").css('display', 'block');
                            $("#divError").text("Ошибка на сервере. Попробуйте позже.");
                        }
                    },
                    error:function(error){
                        $("#divLoad").css('display', 'none');
                        console.log(error);
                        $("#divError").css('display', 'block');
                        $("#divError").text("Сервер не доступен. Попробуйте позже.");
                    },timeout:15000
                });
            }
            return false;
        });
    });
</script>